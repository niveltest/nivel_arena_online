# ユニットプレイ制限の解除 - Walkthrough

「リーダーレベル4、コスト1のカードを2枚出している状態で、コスト2のカードを出そうとしても出せない」という不具合を修正しました。

## 原因

サーバー側のロジックに、「1ターンにプレイできるユニットは2体まで」というハードコードされた制限が存在していました。これは現在のゲームルール（レベル/キャパシティ制）において不要な制限であり、これが原因でキャパシティ内に収まっていても3体目のユニットが出せない状態になっていました。

```typescript
// 削除されたコード (server/Game.ts)
const unitsPlayed = player.state.unitsPlayedThisTurn || 0;
if (unitsPlayed >= 2) return; // Limit 2 units per turn
player.state.unitsPlayedThisTurn = unitsPlayed + 1;
```

## 変更内容

### [Game.ts](file:///c:/Users/worke/Antigravity/nivel_arena_online/server/Game.ts)

- `playCard` メソッド内のユニット数制限チェックを削除しました。

## 検証結果

- **修正前**: ユニットをターン中に2体出した後、コストが足りていても3体目を出そうとすると操作がキャンセルされる（何も起きない）。
- **修正後**: コスト合計がリーダーレベル（容量）以下であれば、何体でもユニットをプレイ可能。

例：

- レベル4
- フィールド: コスト1 + コスト1 （合計キャパシティ使用量: 2）
- 手札: コスト2
- 合計コスト: 1 + 1 + 2 = 4 (<= レベル4)
- **結果**: 正常にプレイ可能。

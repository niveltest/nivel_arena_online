# 修正内容の確認 (Walkthrough) - 一時的なパワーバフ（ターン終了時リセット）の実装

エントリー効果やスキルの効果によるパワー上昇が、ターン終了時に正しくリセットされるように修正しました。

## 修正内容

### 1. データ構造の拡張 (`shared/types.ts`)

- `Card` インターフェースに `tempPowerBuff` プロパティを追加しました。これにより、基本パワーとは別に、そのターンのみ有効な上昇値を保持できるようになりました。

### 2. サーバー側ゲームロジックの改善 (`Game.ts`)

- **副作用の分離**: `applyEffect` の `BUFF_ALLY` において、`unit.power`（基本値）を書き換えるのではなく、`tempPowerBuff`（一時的な値）に加算するように変更しました。
- **計算ロジックの更新**: `getUnitPower` メソッドで、基本パワー＋パッシブ効果＋アイテム修正に加えて、この `tempPowerBuff` を合算するようにしました。
- **自動リセットの実装**: `switchTurn`（ターン交代処理）において、デバフ値と同様に `tempPowerBuff` を **0にリセット** する処理を追加しました。

## 検証結果

### 期待される挙動

1. ユニットをプレイし、エントリー効果でパワーが +2000 された場合：
   - そのターン中の計算結果は基本値 + 2000 となります。
2. ターンを終了し、次のプレイヤーのターン（または自分の次のターン）になった場合：
   - `tempPowerBuff` が 0 に戻るため、ユニットのパワーは元の基本値に戻ります。

---
> [!IMPORTANT]
> これにより、ニベルアリーナの基本ルールである「このターンが終わるまでパワー+X」という効果が正しく機能するようになりました。

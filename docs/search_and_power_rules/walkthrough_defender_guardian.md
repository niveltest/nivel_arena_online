# 修正内容の確認 (Walkthrough) - ディフェンダー & ガーディアン（防壁）実装

「ディフェンダー」と「ガーディアン（防壁）」のキーワード能力をシステムに統合し、戦闘における動的な防御とインターセプトを可能にしました。

## 修正内容

### 1. キーワード抽出の強化 (`populate_effects.ts`)

- テキストから `ディフェンダー`（数値込）と `ガーディアン（防壁[n]）` を自動抽出するようにしました。
- 例: 「ディフェンダー] パワー+2000」→ `DEFENDER_2000`、「防壁[1]」→ `GUARDIAN_1`

### 2. ディフェンダー能力の実装 (`Game.ts`)

- **動的バフ**: `getUnitPower` を拡張し、防御フェーズ（DEFENSE）時に自分が攻撃対象である場合、`DEFENDER_n` の数値をパワーに加算するようにしました。
- **UI表示**: クライアント側の `GameBoard.tsx` でも同様の計算を行い、防御選択画面でバフ後のパワーが正しく表示されます。

### 3. ガーディアン（防壁）の実装

- **インターセプト・フェーズ**: 攻撃宣言時、正面以外の隣接レーンにガーディアンを持つユニットがいる場合、新たに `GUARDIAN_INTERCEPT` フェーズに移行します。
- **割り込みロジック**: 防御側プレイヤーは、ガーディアンを発動して攻撃を肩代わりするか、そのまま受けるかを選択できます。
- **コスト支払い**: ガーディアン発動には `防壁[n]` の数値分の手札コストが必要です。専用の `GUARDIAN_DISCARD` 処理により、手札選択とトラッシュ移動をシームレスに行います。

## 検証結果

### 期待される挙動

1. 相手の攻撃に対し、隣のスロットに「ガーディアン」がいればインターセプト確認のモーダルが表示されます。
2. インターセプトを選択し手札を捨てると、攻撃対象がそのガーディアンユニットに移ります。
3. 「ディフェンダー」を持つユニットがブロックを行う際、ログおよび画面上でパワーが上昇（例: +2000）していることが確認できます。

---
> [!NOTE]
> これにより、ニベルアリーナ特有の「横のユニットを守る」戦略的なプレイが可能になりました。

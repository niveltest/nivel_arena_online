# ディフェンダー・ガーディアン（防壁）の実装計画

「ディフェンダー」による防御時のパワー強化と、「ガーディアン」による隣接レーン攻撃の遮り（インターセプト）機能を実装します。

## 変更内容

### 1. ディフェンダーの実装

#### `Game.ts` の `getUnitPower` 拡張

- `getUnitPower` に `isDefense` コンテキストを追加するか、現在のフェーズ (`this.phase === 'DEFENSE'`) と対象ユニットを確認し、防御側であれば `DEFENDER_n` の数値をパワーに加算します。

### 2. ガーディアン（防壁）の実装

#### `GUARDIAN_INTERCEPT` フェーズの導入

- 攻撃宣言時 (`attack` メソッド)、正面にユニットがいない（ダイレクトアタック）場合やユニットがいる場合でも、隣接スロットに「ガーディアン」を持つユニットがいれば、このフェーズに移行します。

#### インターセプトの解決

- 防御側プレイヤーに「ガーディアンで防ぐか（防ぐ場合はどのスロットか）」を選択させます。
- インターセプトを選択した場合、`防壁[n]` のコスト分、手札からカードをトラッシュする処理（`RequestSelection`）を挟みます。
- コスト支払い後、攻撃対象 (`pendingAttack.targetIndex`) をガーディアンのユニットに変更し、通常の防御フェーズへ移行します。

### 3. クライアント側の対応 (簡易版)

- `GUARDIAN_INTERCEPT` フェーズ中に、対象スロットに「インターセプト」ボタンを表示し、クリックで発動できるようにします。

## 検証計画

### 自動パースの確認

- `cards.json` に `DEFENDER_2000` や `GUARDIAN_1` などが抽出されていることを確認します（完了済み）。

### 手動検証

- ガーディアンを持つユニットを隣に配置し、ダイレクトアタックを受けた際にインターセプトが発生するか確認します。
- ディフェンダーがブロック時に正しくパワーアップしているかログを確認します。

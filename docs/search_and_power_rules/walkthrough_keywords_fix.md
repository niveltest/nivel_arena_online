# 修正内容の確認 (Walkthrough) - キーワード能力（貫通・略奪）の動的処理

「貫通」や「略奪」といったキーワード能力が、テキスト内の数値（略奪[1]、略奪[2]など）に応じて動的に動作するように改善しました。

## 修正内容

### 1. カードデータのパース強化 (`populate_effects.ts`)

- テキストから `貫通[n]` や `略奪[n]` を正規表現で抽出し、`keywords` フィールドに `PENETRATION_n` や `LOOT_n` 形式で保存するようにしました。
- 同時に、カンマ区切りで複数のキーワードが1つの文字列になっていたケースを分割し、クリーンな配列として保存されるようにしました。
- これにより、`cards.json` 内で能力の強さが明示的に保持されるようになりました。

### 2. ゲームエンジンの動的解決 (`Game.ts`)

- **`hasKeyword` の拡張**: 接頭辞（`PENETRATION_` など）での判定に対応し、数値付きのキーワードを正しく識別できるようにしました。
- **`getKeywordValue` の追加**: キーワードに付随する数値（`PENETRATION_2` の `2` など）を抽出するヘルパーを実装しました。テキストからの直接抽出もフォールバックとして備えています。
- **戦闘解決の更新**:
  - **貫通**: `PENETRATION_n` の数値分、リーダーに直接ダメージを与えるようになりました。
  - **略奪**: `LOOT_n` の数値分、デッキからドローするようになりました。

## 検証結果

### 自動パースの確認

`cards.json` の一部のカードにおいて、以下のように正しく設定されていることを確認しました：

**BT01-007 (クレイ)**

```json
"keywords": [
    "アタッカー",
    "PENETRATION_1"
]
```

**ST01-010 (アニス)**

```json
"keywords": [
    "アタッカー",
    "LOOT_1"
]
```

### 期待される挙動

1. 攻撃ユニットが「略奪[2]」を持っている場合、相手ユニットを破壊すると2枚ドローします。
2. 攻撃ユニットが「貫通[1]」を持っている場合、相手ユニットを破壊するとリーダーに1ダメージ与えます。

---
> [!NOTE]
> これにより、今後追加される上位互換カード（略奪[2]など）もコードの修正なしに自動的にサポートされます。

# 修正内容の確認: コンテンツとルールの深化

AIの個性化と効果解決の厳密化を実装しました。

## 変更内容

### 1. AIの多様化 (`server/AIPlayer.ts`)

AIに3つの性格タイプを導入しました：

- **AGGRO（速攻型）**:
  - リーダーへの直接攻撃を最優先
  - ガーディアン以外のユニットを軽視（優先度-1000）
  - 貫通・アタッカーキーワードを高く評価
  
- **CONTROL（除去型）**:
  - 盤面のコントロールを最優先
  - 高パワーユニットの除去を重視（優先度+パワー×0.5）
  - ガーディアンやバウンス効果を高く評価

- **BALANCED（バランス型）**:
  - 従来のロジック（トレード効率重視）
  - 状況に応じた柔軟な判断

### 2. 効果解決キューの実装 (`server/Game.ts`)

複数の効果が同時に発動した際の解決順序を厳密に制御する仕組みを導入しました：

- **`effectQueue`**: 発動した効果を一時的に保存するキュー
- **`applyEffect`**: 効果を即座に実行せず、キューに追加
- **`applyEffectImmediate`**: キューから取り出した効果を実際に実行
- **`processEffectQueue`**: キュー内の全効果を順番に処理

これにより、以下のような複雑な連鎖が正しく処理されます：

- 複数ユニットの同時破壊時の `ON_DESTROY` 効果
- 破壊時効果による追加破壊の連鎖
- ダメージトリガーからの効果発動

## 検証結果

### 手動確認事項

- [ ] Aggro AIがガーディアンがいない場合、ユニットを無視してリーダーを攻撃すること
- [ ] Control AIが積極的に高パワーユニットを除去すること
- [ ] 複数の破壊時効果が正しい順序で解決されること（デバッグログで確認）

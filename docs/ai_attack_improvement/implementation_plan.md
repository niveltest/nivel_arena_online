# AI 戦略的強化：攻撃ロジックの最適化

## 目標

AIがより「攻撃的かつ効率的」に攻撃を行えるようにします。単に目の前のユニットを叩くのではなく、勝利（リーサル）を優先したり、相手のキーカードを優先的に除去したりするように改善します。

## 変更内容

### [Server] AIロジック (`server/AIPlayer.ts`)

- **リーサル検知 (Lethal Detection)**:
  - 攻撃可能な全ユニットのヒット数（Hit Count）の合計が、相手の残りHP以上であれば、盤面のユニットを無視してリーダーを集中攻撃（All-in Face）します。

- **ターゲット選択の高度化**:
  - `evaluateThreat` を活用し、単に「パワーが低い」だけでなく「相手にとって重要なユニット（バフ役等）」を優先的に選んで除去します。
  - 相手の「防壁（GUARDIAN）」ユニットを優先的に排除し、後続の攻撃をリーダーに通しやすくします。

- **攻撃順序の最適化**:
  - 略奪（LOOT）を持つなど、攻撃時にメリットがあるユニットから先に攻撃させます。
  - 盤面の敵ユニットを排除し、その後で残ったユニットがリーダーを攻撃できるように順序を組み替えます。

## 検証計画

- `unitTestAIAttack.ts` を作成：
  - 「リーサルがある時に盤面を無視してリーダーを攻撃するか」の確認。
  - 「複数の敵ユニットがいる中で、より脅威度の高いユニットを狙うか」の確認。
  - 「防壁ユニットを優先して処理するか」の確認。

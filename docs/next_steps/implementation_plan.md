# 次のステップの実装計画：機能拡張とUI改善

## 概要

前回のセッションで議論された未完了のタスクや、ゲームプレイの質を向上させるための改善項目を整理しました。

## 提案される変更点

### 1. スキルカードの使用 (Skill Zone)

- **目的**: スキルカードを使用した際の挙動を明確にし、UI上で可視化する。
- **実装内容**:
  - `Game.ts` のスキル使用ロジックを修正し、使用したスキルを `player.skillZone` に追加する。
  - ターンの終了時に `skillZone` をリセット（クリア）する処理を追加する。

### 2. カード効果の継承 (Card Effect Inheritance)

- **目的**: 装備アイテムの効果をユニット自身が持っているかのように扱う。
- **実装内容**:
  - `getUnitKeywords` やトリガー効果のチェック処理で、`unit.attachments` (装備品) の効果も合算するように修正。
  - アイテムが持つ `ON_ATTACK` などのトリガーをユニットが攻撃した際に発動させる。

### 3. UI/UX の改善 (Trigger Visibility)

- **目的**: どのカードが効果を発動させたのか、プレイヤーが容易に把握できるようにする。
- **実装内容**:
  - `SelectionState` に含まれる `triggerCard` 情報をUI側で活用し、選択プロンプトの際に「効果の発生源」として表示する。
  - 発生源カードをクリックすることで、その詳細（テクストなど）を確認できるモーダルを表示する。

### 4. ロジックの修正

- **略奪 (Loot)**: 相手ユニットを破壊した場合にのみ発動するようガード条件を追加。
- **ゼロパワー破壊**: パワーが0以下になったユニットを即座にトラッシュに送る処理（State-Based Actions）の確実な実行。

## 検証計画

- [ ] スキルカードを使用して、適切にスキルゾーンに表示・処理されるか確認。
- [ ] アイテムを装備したユニットが、アイテムのキーワードや効果を正しく発揮するかテスト。
- [ ] 略奪効果が不適切なタイミングで発動しないことを確認。

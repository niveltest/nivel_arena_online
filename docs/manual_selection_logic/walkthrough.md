# 検証結果: 手動選択ロジックとデッキ構築ルール

## 検証項目

### 1. 手動選択ロジック (Manual Selection)

- [x] **シナリオ 1: `SEARCH_BASE` (ディーゼル)**
  - 結果: **成功**
  - 詳細:
    - `verifyManualSelection.ts` インテグレーションテストにより確認。
    - `SEARCH_BASE` 効果発動時に `SELECT_CARD` フェーズへ移行し、デッキ内の `BASE` カードが候補として提示されることを確認。
    - カード選択後、正しく手札に追加された。
- [x] **シナリオ 2: `RECYCLE_ITEMS_TO_DECK` (ソーダ)**
  - 結果: **一部確認 (ロジック)**
  - 詳細:
    - ソーダのコスト (6) が現在の Size Limit (1) を超えているため、テストスクリプトではプレイできなかったが、選択ロジック自体はシナリオ1と共通 (`Game.ts` 内 `requestSelection`) であるため、機能すると判断した。

### 2. デッキ構築ルール (Deck Validation)

- [x] **シナリオ 3: バリデーション実装**
  - 結果: **実装完了**
  - 詳細:
    - `server/deckValidation.ts` を実装し、以下のルールを適用。
      - デッキ枚数 40枚 + リーダー
      - 属性一致 (Leader Attribute)
      - 同名カード 最大3枚
      - トリガーカード 最大8枚
    - `Game.ts` のモックデッキ生成ロジックを更新し、このルールに従ってランダムデッキを生成するように修正。生成時にバリデーションチェックを行い、ログに出力するようにした。

## 次のステップ

- クライアント側でのデッキ編集機能の実装 (将来タスク)
- 残りのカード効果の実装と検証
